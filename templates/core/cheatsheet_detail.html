{% extends "base.html" %}

{% load static %}

{% block title %}{{ cheatsheet.title }} - DevCheatHub{% endblock %}

{% block content %}
<div class="container">
    <a href="{% url 'category_detail' cheatsheet.category.slug %}" class="breadcrumb">&larr; Back to {{ cheatsheet.category.name }}</a>
    <h1 class="page-title">{{ cheatsheet.title }}</h1>
    <p class="cheatsheet-description">{{ cheatsheet.description }}</p>
    <small class="timestamp">Last updated: {{ cheatsheet.updated_at|date:"F j, Y" }}</small>

    <hr class="separator">

    {% for section in cheatsheet.content.sections %}
        {% for sub_section in section.sub_sections %}
            <div class="snippet-container">
                <h2>{{ sub_section.sub_section_heading }}</h2>
                <div class="code-block-wrapper">
                    <div class="code-block">
                        <button class="copy-btn" title="Copy to clipboard">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                            <span>Copy</span>
                        </button>
                        <pre><code class="language-{{ sub_section.language }}">{{ sub_section.code }}</code></pre>
                    </div>
                </div>
                {% if sub_section.output %}
                    <h3>Output:</h3>
                    <div class="class.code-block-wrapper">
                        <div class="code-block output-block">
                            <pre><code class="nohighlight">{{ sub_section.output }}</code></pre>
                        </div>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    {% endfor %}
</div>
<hr class="separator">
<div class="contributor-section">
    <h2 class="contributor-section-title" style="margin-left: 2rem; text-align: left; font-size: 1.8rem;">Contributor</h2>
    <a href="{% url 'profile' cheatsheet.author.username %}" class="contributor-link">
        <div class="contributor-card">
            <img class="profile-picture" src="{{ cheatsheet.author.profile.avatar_url }}" alt="{{ cheatsheet.author.username }}'s profile picture">
            <div class="contributor-info" style="color: #8C52FF;">
                <h3 class="contributor-name">{{ cheatsheet.author.get_full_name|default:cheatsheet.author.username }}</h3>
                {% if cheatsheet.author.profile.github_url %}
                    <a href="{{ cheatsheet.author.profile.github_url }}" class="social-link" target="_blank" rel="noopener noreferrer">View GitHub</a>
                {% endif %}
                |
                {% if cheatsheet.author.profile.linkedin_url %}
                    <a href="{{ cheatsheet.author.profile.linkedin_url }}" class="social-link" target="_blank" rel="noopener noreferrer">View LinkedIn</a>
                {% endif %}
            </div>
        </div>
    </a>
</div>
{% endblock %}
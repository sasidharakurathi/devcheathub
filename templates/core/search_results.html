{% extends "base.html" %}

{% block content %}
<div class="container">
    {% if query %}
        <h1 class="page-title">Search Results for "{{ query }}"</h1>
        {% comment %} <p class="text-secondary">{{ results.count }} result{{ results.count|pluralize }} found.</p> {% endcomment %}
    {% else %}
        <h1 class="page-title">Search DevCheatHub</h1>
    {% endif %}

    <hr class="separator">
    
    {% if page_obj %}
        <div class="list-container">
            {% for cheatsheet in page_obj %}
                <a href="{% url 'cheatsheet_detail' cheatsheet.slug %}" class="list-item-link">
                    <div class="list-item">
                        <div>
                            {% if cheatsheet.category.parent and  cheatsheet.category.parent.icon %}
                                <img src="{{ cheatsheet.category.parent.icon.url }}" alt="{{ cheatsheet.category.parent.name }} logo" class="card-icon">
                            {% elif  cheatsheet.category.icon %}
                                <img src="{{ cheatsheet.category.icon.url }}" alt="{{ cheatsheet.category.name }} logo" class="card-icon">
                            {% endif %}
                        </div>
                        <div>
                            <h2 class="list-item-title">{{ cheatsheet.title }}</h2>
                            <p class="list-item-description">{{ cheatsheet.description }}</p>
                        </div>
                    </div>
                </a>
            {% endfor %}

            {% include 'partials/pagination.html' %}
        </div>
    {% elif query %}
        <p>No cheatsheets found matching your query. Please try a different search term.</p>
    {% else %}
        <p>Use the search bar in the header to find cheatsheets by title or description.</p>
    {% endif %}
</div>
{% endblock %}